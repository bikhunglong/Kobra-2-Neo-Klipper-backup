[gcode_macro test]
gcode:
    {% set Z_CALCULATED_PROBE = printer.save_variables.variables.z_calculate_probe | default(0) | float | round(3) %}
    RESPOND TYPE=command MSG="z_calculate_probe= : {Z_CALCULATED_PROBE}"

    {% set Z_CURRENT_OFFSET = printer.configfile.settings.probe.z_offset | default(0) | float | round(3) %}
    RESPOND TYPE=command MSG="z_offset= : {Z_CURRENT_OFFSET}"

    SET_GCODE_OFFSET Z={Z_CALCULATED_PROBE} MOVE=1